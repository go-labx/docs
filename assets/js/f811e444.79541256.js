"use strict";(self.webpackChunkgo_labx_github_io=self.webpackChunkgo_labx_github_io||[]).push([[1],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),g=a,m=d["".concat(u,".").concat(g)]||d[g]||c[g]||i;return n?r.createElement(m,o(o({ref:t},s),{},{components:n})):r.createElement(m,o({ref:t},s))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=g;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l[d]="string"==typeof e?e:a,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},4876:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={},o="Routing",l={unversionedId:"routing",id:"routing",title:"Routing",description:"The Lightning web framework provides a built-in router to handle incoming HTTP requests. In this article, we will discuss how to use the routing feature of the framework, including:",source:"@site/docs/routing.md",sourceDirName:".",slug:"/routing",permalink:"/docs/routing",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Quickstart",permalink:"/docs/quickstart"},next:{title:"Middleware",permalink:"/docs/middleware"}},u={},p=[{value:"Basic routing",id:"basic-routing",level:2},{value:"Route Parameters",id:"route-parameters",level:2},{value:"Wildcards routing",id:"wildcards-routing",level:2},{value:"Routing Group",id:"routing-group",level:2},{value:"Route Nesting",id:"route-nesting",level:4},{value:"Conclusion",id:"conclusion",level:2}],s={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"routing"},"Routing"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Lightning")," web framework provides a built-in router to handle incoming HTTP requests. In this article, we will discuss how to use the routing feature of the framework, including:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Basic routing"),(0,a.kt)("li",{parentName:"ul"},"Route parameters"),(0,a.kt)("li",{parentName:"ul"},"Wildcards routing"),(0,a.kt)("li",{parentName:"ul"},"Route group")),(0,a.kt)("h2",{id:"basic-routing"},"Basic routing"),(0,a.kt)("p",null,"Basics are the most fundamental form of routing in the ",(0,a.kt)("inlineCode",{parentName:"p"},"lightning")," framework. It supports various HTTP request methods such as GET, POST, PUT, DELETE, etc. Here\u2019s an example of a GET request:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'app.Get("/ping", func(ctx *lightning.Context) {\n    ctx.JSON(map[string]string{\n        "message": "pong",\n    })\n})\n')),(0,a.kt)("h2",{id:"route-parameters"},"Route Parameters"),(0,a.kt)("p",null,"Route parameters are used to ",(0,a.kt)("strong",{parentName:"p"},"match dynamic parts of the URL"),". A parameter is denoted by a colon ",(0,a.kt)("inlineCode",{parentName:"p"},":")," followed by a name. For example, the URL pattern ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/user/:id")," will match any URL that starts with ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/user/")," and has a dynamic ",(0,a.kt)("inlineCode",{parentName:"p"},"id")," parameter."),(0,a.kt)("p",null,"Here\u2019s an example of a GET request:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'app.Get("/api/user/:id", func(ctx *lightning.Context) {\n    userId := ctx.Param("id")\n    // implementation\n})\n')),(0,a.kt)("p",null,"When a request is made to a route with parameters, the router will extract the parameter values from the URL and pass them to the handler function. The parameter values are stored in a map and can be accessed within the handler function."),(0,a.kt)("p",null,"In the examples above, ",(0,a.kt)("inlineCode",{parentName:"p"},":id")," is a parameter that can be accessed in the route handling function through ",(0,a.kt)("inlineCode",{parentName:"p"},'ctx.Param("id")'),"."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Multiple dynamic parameters")," can also be inserted, as shown in the following example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'app.Get("/api/user/:userId/article/:articleId", func(ctx *lightning.Context) {\n    userId := ctx.Param("userId")\n    articleId := ctx.Param("articleId")\n    // implementation\n})\n')),(0,a.kt)("h2",{id:"wildcards-routing"},"Wildcards routing"),(0,a.kt)("p",null,"Wildcard routes are used to ",(0,a.kt)("strong",{parentName:"p"},"match any part of a URL"),". A wildcard is denoted by an asterisk ( ",(0,a.kt)("inlineCode",{parentName:"p"},"*")," ) followed by a name. For example, the URL pattern ",(0,a.kt)("inlineCode",{parentName:"p"},"/files/*filepath")," will match any URL that starts with ",(0,a.kt)("inlineCode",{parentName:"p"},"/files/")," and has a dynamic ",(0,a.kt)("inlineCode",{parentName:"p"},"filepath")," parameter."),(0,a.kt)("p",null,"For example, the following code defines a GET route that will handle all requests that start with ",(0,a.kt)("inlineCode",{parentName:"p"},"/files/"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'app.Get("/files/*filepath", func(ctx *lightning.Context) {\n    filepath := ctx.Param("filepath")\n    // implementation\n})\n')),(0,a.kt)("p",null,"This code defines a GET route with the URL pattern ",(0,a.kt)("inlineCode",{parentName:"p"},"/files/*filepath"),". When a request is made to this route, the router will extract the ",(0,a.kt)("inlineCode",{parentName:"p"},"filepath")," parameter from the URL and pass it to the handler function. The parameter is accessed within the function using ",(0,a.kt)("inlineCode",{parentName:"p"},'ctx.Param("filepath")'),". This value can then be used in the implementation of the route handling function."),(0,a.kt)("p",null,"In addition to the above, the wildcard can also be followed by no name. For example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'app.Get("/api/*", func(ctx *lightning.Context) {\n    // implementation\n})\n')),(0,a.kt)("p",null,"In the example above, ",(0,a.kt)("inlineCode",{parentName:"p"},"*")," is a wildcard character that matches any path."),(0,a.kt)("h2",{id:"routing-group"},"Routing Group"),(0,a.kt)("p",null,"Route grouping is particularly useful when building large web applications with many routes. By grouping related routes together, developers can more easily navigate and maintain their codebase."),(0,a.kt)("p",null,"In addition to improved organization, route grouping also allows for more efficient middleware handling. Middleware functions can be applied to an entire route group, rather than being added individually to each route. This can reduce code duplication and improve application performance."),(0,a.kt)("p",null,"The following code demonstrates how to use route group in lightning:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'package main\n\nimport (\n    "fmt"\n    "github.com/go-labx/lightning"\n    "net/http"\n)\n\nfunc main() {\n    app := lightning.NewApp()\n\n    // user group\n    userGroup := app.Group("/api/user")\n    userGroup.Use(func(ctx *lightning.Context) {\n        fmt.Println("user group middleware ---\x3e")\n        ctx.Next()\n        fmt.Println("<--- user group middleware")\n    })\n    userGroup.Get("/:userId", func(ctx *lightning.Context) {\n        ctx.JSON(http.StatusOK, map[string]interface{}{\n            "username": "zhangsan",\n            "age":      20,\n        })\n    })\n\n    // goods group\n    goodsGroup := app.Group("/api/goods")\n    goodsGroup.Use(func(ctx *lightning.Context) {\n        fmt.Println("goods group middleware ---\x3e")\n        ctx.Next()\n        fmt.Println("<--- goods group middleware")\n    })\n    goodsGroup.Get("/:alias", func(ctx *lightning.Context) {\n        ctx.JSON(http.StatusOK, lightning.Map{\n            "title":       "goods title",\n            "description": "goods description",\n        })\n    })\n\n    app.Run()\n}\n')),(0,a.kt)("p",null,"The code above defines two route groups: ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/user")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"/api/goods"),". Each group has its own middleware and endpoints."),(0,a.kt)("h4",{id:"route-nesting"},"Route Nesting"),(0,a.kt)("p",null,"Route nesting is a technique used to group related routes together in a hierarchical structure. This can be useful for organizing large applications with many routes."),(0,a.kt)("p",null,"To nest routes in Go, simply create a new group and add routes to it. The following code demonstrates how to nest routes in lightning:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},'// user group\nuserGroup := app.Group("/api/user")\nuserGroup.Use(func(ctx *lightning.Context) {\n    fmt.Println("user group middleware ---\x3e")\n    ctx.Next()\n    fmt.Println("<--- user group middleware")\n})\nuserGroup.Get("/:userId", func(ctx *lightning.Context) {\n    ctx.JSON(http.StatusOK, map[string]interface{}{\n        "username": "zhangsan",\n        "age":      20,\n    })\n})\n\n// nested group\nnestedGroup := userGroup.Group("/:userId/orders")\nnestedGroup.Use(func(ctx *lightning.Context) {\n    fmt.Println("nested group middleware ---\x3e")\n    ctx.Next()\n    fmt.Println("<--- nested group middleware")\n})\nnestedGroup.Get("/:orderId", func(ctx *lightning.Context) {\n    ctx.JSON(http.StatusOK, lightning.Map{\n        "order_id": "123456",\n        "status":   "shipped",\n    })\n})\n')),(0,a.kt)("p",null,"In the code above, a new group is created under the userGroup route with the pattern ",(0,a.kt)("inlineCode",{parentName:"p"},"/:userId/orders"),". This group has its own middleware and endpoint that returns a JSON response with the order ID and status."),(0,a.kt)("p",null,"By nesting routes in this way, it becomes easier to manage and maintain complex applications with many routes."),(0,a.kt)("h2",{id:"conclusion"},"Conclusion"),(0,a.kt)("p",null,"These are the three basic forms of routing in the ",(0,a.kt)("inlineCode",{parentName:"p"},"lightning")," framework. Using these, you can create various complex routing rules. If you want to learn more about using the ",(0,a.kt)("inlineCode",{parentName:"p"},"lightning")," framework, please refer to the official documentation."))}c.isMDXComponent=!0}}]);